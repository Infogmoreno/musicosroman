<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    
    <script>
      /* global AFRAME */
      AFRAME.registerComponent("play-on-click", {
        init: function () {
          this.onClick = this.onClick.bind(this);
        },
        play: function () {
          window.addEventListener("click", this.onClick);
        },
        pause: function () {
          window.removeEventListener("click", this.onClick);
        },
        onClick: function (evt) {
          var videoEl = this.el.getAttribute("material").src;
          var sound = document.querySelector('#sound');
          if (!videoEl) {
            return;
          }
          this.el.object3D.visible = true;
          videoEl.play();
          sound.play();
        },
      });

    </script>
  </head>
  <body>
    <a-scene      
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      webxr="requiredFeatures: hit-test,local-floor;
                optionalFeatures: dom-overlay,unbounded;
                overlayElement: #overlay;"
      ar-hit-test="target:#video;"
      
    >
      <a-assets>        
        <video
          id="video_musicos"
          src="assets/Musicos_roman_instrum_conmusica.webm"
          
          loop="false"
        ></video>
        <audio 
         id="loc_tibiac" 
         src="assets/Tibiac_voz_mujer2.wav"
         crossorigin="anonymous"
         preload="auto"
          ></audio>
          <audio 
         id="loc_timpanun" 
         src="assets/Timpanum_voz_mujer.wav"
         crossorigin="anonymous"
         preload="auto"
          ></audio>
        <img 
         id="tibiactxt" 
         src="assets/Tibiac_txt.png"         
          >
        <img 
         id="timpanumtxt" 
         src="assets/Timpanum_txt.png"         
          >  
      </a-assets>
      <!-- If you prefer use entities -->

      <!-- If you prefer use a web component -->

      <a-camera
        position="0 1 0"
        look-controls
        wasd-controls="acceleration: 10"
        cursor="rayOrigin: entity"
        raycaster="objects: .click"
      ></a-camera>
    
      <a-entity 
         id="video" 
         position="0 1 0" 
         class="click">
        <!-- If you prefer use a web component -->
        <a-video
          class="click"
          height="0.6"
          width="0.6"
          material="src: #video_musicos"
          position="0 0 -0.65"
          play-on-click
        >
        </a-video>
       <a-image
        id="tibiac_rotulo"
        src="#tibiactxt"
        shader="flat"
        position="-0.02 0.2 -0.6"
        width="1"
        height="0.5"
        scale="0.1 0.1 0">
        </a-image>
        <a-image
        id="timpanum_rotulo"
        src="#timpanumtxt"
        shader="flat"
        position="0.22 0.17 -0.6"
        width="1"
        height="0.5"
        scale="0.1 0.1 0">
        </a-image>
        <a-sound
          id="tibiacloc"          
          src="#loc_tibiac"
          position="0.01466 0.09788 -0.63"
          >
         </a-sound>
        <a-sound
          id="timpanumcloc"
          class="click"
          src="#loc_timpanum"
          play-on-click></a-sound>
      </a-entity>
    </a-scene>
  </body>
</html>
